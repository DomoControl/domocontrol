<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="robots" content="noindex" />
    <title>Domus Control</title>
    <link href="./css/style.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="/webiopi.js"></script>
    <!-- <script language="Javascript" src="http://www.codehelper.io/api/ips/?js"></script> -->
    <script type="text/javascript"> 

        //Ciclo principale
        webiopi().ready(
            function() {
                
                getPage(1);
                
                webiopi().refreshGPIO();
            });
            // Fine main ciclo
            
            //Funzione che trasforma i cookie in array
            function getCookies() {
                var cookies = { }; 
                if (document.cookie && document.cookie != '') {
                    var split = document.cookie.split(';');
                    for (var i = 0; i < split.length; i++) {
                        var name_value = split[i].split("=");
                        name_value[0] = name_value[0].replace(/^ /, '');
                        cookies[decodeURIComponent(name_value[0])] = decodeURIComponent(name_value[1]);
                    }
                }	  
                return cookies;   
            }                

            function logt(page) {
                //~ webiopi().callMacro("setLogt", [page,codehelper_ip.IP]);
                webiopi().callMacro("setLogt", [page,'----']);
            }
            
            //Sceglie quali pagine mostrare
            function getPage(x) {
                var title;
                var footer;
                var page = getCookies()['page'];
                if(typeof(page) == 'undefined' ) {page = "login";} //init if page is not set
                //~ alert(document.cookie);
                logt(page); //Send LOG
                switch(page) {
                    case 'login':
                        title = '<small>Login</small>'
                        footer = '<span>Inserisci username e password</span>';
                        var f = '<form id="login">';
                        f +=        '<div class="fieldSet">';
                        f +=            '<fieldset>';
                        f +=                '<legend>Form Login</legend>';
                        f +=                '<p><center>Login di prova: luca  -  Password: 123<br>Se sei interessato a contribuire scrivi a subluca@gmail.com</center></p>'
                        f +=                '<p><label class="field" for="Username">Username</label><input id="username" type=text name="username" value="" required autofocus class="textbox-300"></p>';
                        f +=                '<p><label class="field" for="Password">Password</label><input id="password" type=password name="password" value="" required class="textbox-300"></p>';
                        f +=                '<p><label class="field" for="Entra">&nbsp;</label><input id="entra" type="button" name="entra" value="Entra" onclick=Login();  class="textbox-300"></p>';
                        f +=            '</fieldset>';
                        f +=        '</div>';
                        f +=    '</form>';
                        $("#form").html(f);
                        break;
                    case 'menu':    
                        title = '<small>Menu</small>'
                        footer = '<span><input type="button" name="footer" value="LogOut" onclick=LogOut() ></span>' ;
                        footer += '<span>Benvenuto ' + getCookies()["username"] + '</span>';   
                        $("#form").html('<p class="but"><input type="button" name="status" value="Status" onclick="document.cookie=\'page=menuStatus\';getPage(1)" ></p>' +
                                '<p class="but"><input type="button" name="setup" value="Setup" onclick="document.cookie=\'page=menuSetup\';getPage(1)" ></p>');                  
                        break;
                    case 'menuSetup':
                        title = '<small>Menu Setup</small>';
                        footer = '<span><input type="button" name="footer" value="LogOut" onclick=LogOut() ></span>' ;
                        footer += '<span><input type="button" name="footer" value="Main Menu" onclick="document.cookie=\'page=menu\';getPage(1)" ></span>' ;
                        footer += '<span>Benvenuto ' + getCookies()["username"] + '</span>';
                        $("#form").html( '<p class="but"><input type="button" name="setup" value="User Setup" onclick="document.cookie=\'page=userSetup\';getPage(1)" ></p>' +
                            '<p class="but"><input type="button" name="setup" value="Area Setup" onclick="document.cookie=\'page=areaSetup\';getPage(1)" ></p>' +
                            '<p class="but"><input type="button" name="setup" value="Group Privileges" onclick="document.cookie=\'page=groupPrivileges\';getPage(1)" ></p>' +
                            '<p class="but"><input type="button" name="setup" value="Board Setup" onclick="document.cookie=\'page=boardSetup\';getPage(1)" ></p>' +
                            '<p class="but"><input type="button" name="setup" value="Input Setup" onclick="document.cookie=\'page=inputSetup\';getPage(1)" ></p>' +
                            '<p class="but"><input type="button" name="setup" value="Email - SMS Setup" onclick="document.cookie=\'page=email-smsSetup\';getPage(1)" ></p>' );
                        break;
                    case 'userSetup':
                        title = '<small>User Setup</small>';
                        footer = '<span><input type="button" name="footer" value="LogOut" onclick=LogOut() ></span>' ;
                        footer += '<input type="button" name="setup" value="Menu Setup" onclick="document.cookie=\'page=menuSetup\';getPage(1)" >';
                        footer += '<span>Benvenuto ' + getCookies()["username"] + '</span>';
                        //~ alert(getCookies()['user_id'] + document.cookie);
                        webiopi().callMacro("setUser", getCookies()['user_id'] , setUser);
                        $("#form").html('')
                        break;                        
                    case 'areaSetup':
                        title = '<small>Area Setup</small>';
                        footer = '<span><input type="button" name="footer" value="LogOut" onclick=LogOut() ></span>' ;
                        footer += '<input type="button" name="setup" value="Menu Setup" onclick="document.cookie=\'page=menuSetup\';getPage(1)" >';
                        footer += '<span>Benvenuto ' + getCookies()["username"] + '</span>';
                        webiopi().callMacro("setArea", '' , setArea);
                        $("#form").html('')
                        break;       
                    case 'groupPrivileges':
                        title = '<small>Group Privileges</small>';
                        footer = '<span><input type="button" name="footer" value="LogOut" onclick=LogOut() ></span>' ;
                        footer += '<input type="button" name="setup" value="Menu Setup" onclick="document.cookie=\'page=menuSetup\';getPage(1)" >';
                        footer += '<span>Benvenuto ' + getCookies()["username"] + '</span>';
                        webiopi().callMacro("setPrivileges", '' , setPrivileges);
                        $("#form").html('')
                        break;   
                    case 'inputSetup':
                        title = '<small>Input Setup</small>';
                        footer = '<span><input type="button" name="footer" value="LogOut" onclick=LogOut() ></span>' ;
                        footer += '<input type="button" name="setup" value="Menu Setup" onclick="document.cookie=\'page=menuSetup\';getPage(1)" >';
                        footer += '<span>Benvenuto ' + getCookies()["username"] + '</span>';
                        webiopi().callMacro("setInputSetup", '' , setInputSetup);
                        $("#form").html('')
                        break;  
                    case 'boardSetup':
                        title = '<small>Board Setup</small>';
                        footer = '<span><input type="button" name="footer" value="LogOut" onclick=LogOut() ></span>' ;
                        footer += '<input type="button" name="setup" value="Menu Setup" onclick="document.cookie=\'page=menuSetup\';getPage(1)" >';
                        footer += '<span>Benvenuto ' + getCookies()["username"] + '</span>';
                        webiopi().callMacro("setBoardSetup", '' , setBoardSetup);
                        $("#form").html('')
                        break;                        
                    case 'boardIOSetup':
                        title = '<small>Board IO Setup</small>';
                        footer = '<span><input type="button" name="footer" value="LogOut" onclick=LogOut() ></span>' ;
                        footer += '<input type="button" name="setup" value="Menu Setup" onclick="document.cookie=\'page=menuSetup\';getPage(1)" >';
                        footer += '<input type="button" name="setup" value="Board Setup" onclick="document.cookie=\'page=boardSetup\';getPage(1)" >';
                        footer += '<span>Benvenuto ' + getCookies()["username"] + '</span>';
                        webiopi().callMacro("setBoardIOSetup", '', setBoardIOSetup);
                        $("#form").html('')
                        break;   
                    case 'areaSetup':
                        title = '<small>Area Setup</small>';
                        footer = '<span><input type="button" name="footer" value="LogOut" onclick=LogOut() ></span>' ;
                        footer += '<input type="button" name="setup" value="Menu Setup" onclick="document.cookie=\'page=menuSetup\';getPage(1)" >';
                        footer += '<span>Benvenuto ' + getCookies()["username"] + '</span>';
                        $("#form").html('')
                        break;
                    case 'email-smsSetup':
                        title = '<small>Email - SMS Setup</small>';
                        footer = '<span><input type="button" name="footer" value="LogOut" onclick=LogOut() ></span>' ;
                        footer += '<input type="button" name="setup" value="Menu Setup" onclick="document.cookie=\'page=menuSetup\';getPage(1)" >';
                        footer += '<span>Benvenuto ' + getCookies()["username"] + '</span>';
                        $("#form").html('')
                        break;
                    case 'menuStatus':
                        title = '<small>Status</small>';
                        footer = '<span><input type="button" name="footer" value="LogOut" onclick=LogOut() ></span>' ;
                        footer += '<input type="button" name="setup" value="Menu" onclick="document.cookie=\'page=menu\';getPage(1)" >';
                        footer += '<span>Benvenuto ' + getCookies()["username"] + '</span>';
                        $("#form").html('<center>Pagina da completare</center><br><br>')
                        break;
                    default:
                        footer = '<span><input type="button" name="footer" value="LogOut" onclick=LogOut() ></span>' ;
                } 
                
                $("#title").html('<h1>DomoControl - ' + title + '</h1>');
                $("#footer").html(footer);
                return
            }
            
            //verifica se le credenziali sono corrette
            function Login() {
                if($("#username").val() && $("#password").val()) {
                    webiopi().callMacro("setLogin", [$("#username").val(),$("#password").val()], setLogin);
                }
                else {
                    alert("Inserisci i campi Username e Password");
                }
            } 
            
            //Ritorna i dati dell'utente che vengono salvati
            var setLogin = function (macro, args, response) {
                if(response == "Login_NO") {
                    alert("Username e Password non validi");    
                } else {
                    var res = $.parseJSON(response)[0];
                    document.cookie = "user_id = " +res ['id'];
                    document.cookie = "username = " +res ['username'];
                    document.cookie = "name = " +res['name'];
                    document.cookie = "surname = " +res['surname'];
                    document.cookie = "page = menu";
                    getPage(1);
                }
                
            }
            
            //rimuove i cookie e logout
            function LogOut() {
                document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
                document.cookie = "piLogin=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
                document.cookie = "page=login";
                getPage(1);
            }
            
            //Pagine setupUser
            var setUser = function (macro, args, response) {
                var res = eval(response);
                f = '<form name="setUserForm" id="setUserForm" onsubmit="checkEntries()">';
                //~ f +=    '<p class="required">* Required</p>';
                f +=    '<div class="fieldSet">';
                f +=        '<fieldset>';
                f +=            '<legend>Form Utente</legend>';
                f +=            '<input type="hidden" name="id" value="'+ res[0][0]['id'] +'" class="textbox-300" >';
                f +=            '<p><label class="field" for="Username">Username</label><input type="text" name="username" value="'+ res[0][0]['username'] +'" class="textbox-300" ></p>';
                f +=            '<p><label class="field" for="Password">Password</label><input id="password" type="password" name="password" value="'+ res[0][0]['password'] +'" required class="textbox-300" ></p>';
                f +=            '<p><label class="field" for="Reinsert">Reinsert</label><input id="confirmPassword" type="password" name="confirmPassword" value="" class="textbox-300"></p>';
                f +=            '<p><label class="field" for="Name">Name</label><input type="text" name="name" value="'+ res[0][0]['name'] +'" class="textbox-300" ></p>';
                f +=            '<p><label class="field" for="Surname">Surname</label><input type="text" name="surname" value="'+ res[0][0]['surname'] +'" class="textbox-300" ></p>';
                                res[0][0]['active'] ? checked='checked="checked"' : checked=''; 
                //Checkbox privileges
                var c = ''; var checked
                for(var k in res[1]) {
                    
                    checked = '';
                    var pp = []; pp = res[0][0]['privileges'].split(';');
                    for (var priv in pp) {
                        //~ $("#message").append(res[1][k]['id'] + ' - ' + pp[priv] +'<br>');
                        if (res[1][k]['id'] == pp[priv]) {
                            checked = 'checked="checked"';
                        }
                    }
                    f += '<p><label class="field" for="'+res[1][k]['name']+'">'+res[1][k]['name']+' </label><input type="checkbox" id="privileges" name="privileges[]" value="'+res[1][k]['id']+'" '+ checked +' class="textbox-300" /></p>';
                }
                //end checkbox
                f +=            '<p><label class="field" for="Valida">&nbsp;</label><input id="valida" type="button" name="valida" value="Save" onclick=setUserSave();  class="textbox-300"></p>';
                f +=        '</fieldset>';
                f +=    '</div>';
                f += '</form>';                
                //~ alert(f);
                $("#form").html(f);
                $("#text").html('<center>Ultima connessione: '+res[0][0]['timestamp']+'</center>');
            }
            
            function setUserSave () {
                if ($('#setUserForm').find('input[name="password"]').val() != $('#setUserForm').find('input[name="confirmPassword"]').val()) {
                    alert("Le password non coincidono. Riprovare");
                    return;
                }                
                var r = '';
                r += 'id=' + $('#setUserForm').find('input[name="id"]').val();
                r += ',username='+$('#setUserForm').find('input[name="username"]').val();
                r += ',password='+$('#setUserForm').find('input[name="password"]').val();
                r += ',name='+$('#setUserForm').find('input[name="name"]').val();
                r += ',surname='+$('#setUserForm').find('input[name="surname"]').val();
                
                var p = ',privileges=';
                var k = 0;
                $('#setUserForm').find('input[type="checkbox"]:checked').each ( function() {
                    if(k > 0) {p += ';';}
                    p += $(this).val();
                    k++;
                });
                webiopi().callMacro("setUserSave", [e(r+p)] , setUserSave1);
            }
            
            var setUserSave1 = function(macro, args, response){
                document.cookie = "page=userSetup";
                getPage(1);
            }
            //Fine userSetup
            
            //Pagine setupArea
            var setArea = function (macro, args, response) {
                res = eval(response);
                var f = '<form name="setUserForm" id="setAreaForm">';
                f +=    '<div class="fieldSet">';
                f +=        '<fieldset>';
                f +=            '<legend>Form Area</legend>';
                f +=            '<table class="f-h" align=center><tr><th>ID</th><th>Name</th><th>Description</th><th></th></tr>';
                for (r in res) {
                    //~ $("#text").html(r + ' - ' + res[r]['name'] + '<br>'); 
                    f += '<input type="hidden" name="id['+ res[r]['id'] +']" value="'+ res[r]['id'] +'" />';
                    f += '<td><input type="text" name="name['+ res[r]['id'] +']" value="'+ res[r]['name'] +'"  /></td>';
                    f += '<td><input type="text" name="description['+ res[r]['id'] +']" value="'+ res[r]['description'] +'"  /></td>';
                    f += '<td><input type="button" id="valida" name="valida" value="Save" onclick=setAreaSave(res[r]["id"]); /> ';
                    f += '<input type="button" id="delete" name="delete" value="Delete" onclick=delAreaSave(res[r]["id"]); /> ';
                    
                    f += '</td></tr>';
                }
                f += '<tr><td colspan=3><input type="button" id="add" name="add" value="Add" onclick=setAreaAdd(); /></td></tr> ';                
                f +=        '</table>';
                f +=        '</fieldset>';
                f +=    '</div>';
                f += '</form>'; 
                $("#form").html(f);
            }
            
            function setAreaSave(x) {
                var r = '';
                r += 'id='+$('#setAreaForm').find('input[name="id['+x+']"]').val();
                r += ',name='+$('#setAreaForm').find('input[name="name['+x+']"]').val();
                r += ',description='+$('#setAreaForm').find('input[name="description['+x+']"]').val();
                webiopi().callMacro("setAreaSave", [r] , setAreaSave1);
            }
            
            function setAreaSave1() {
                document.cookie = "page=areaSetup";
                getPage(1);
            }
            
            function delAreaSave(x) {
                webiopi().callMacro("delAreaSave", [x] );
                document.cookie = "page=areaSetup";
                getPage(1);
            }
            
            function setAreaAdd(){
                webiopi().callMacro("setAreaAdd",  '' );
                document.cookie = "page=areaSetup";
                getPage(1);
            }
            //Fine pagina setupArea

            //Pagine setupPrivileges
            var setPrivileges = function (macro, args, response) {
                res = eval(response);
                var f = '<form name="setPrivilegesForm" id="setPrivilegesForm">';
                f +=    '<div class="fieldSet">';
                f +=        '<fieldset>';
                f +=            '<legend>Form Privileges</legend>';
                f +=            '<table class="f-h" align=center><tr><th>ID</th><th>Name</th><th>Description</th><th></th></tr>';
                for (r in res) {
                    //~ $("#text").html(r + ' - ' + res[r]['name'] + '<br>'); 
                    f += '<input type="hidden" name="id['+ res[r]['id'] +']" value="'+ res[r]['id'] +'" />';
                    f += '<td><input type="text" name="name['+ res[r]['id'] +']" value="'+ res[r]['name'] +'" readonly /></td>';
                    f += '<td><input type="text" name="description['+ res[r]['id'] +']" value="'+ res[r]['description'] +'"  /></td>';
                    f += '<td><input type="button" id="valida" name="valida" value="Save" onclick=setPrivilegesSave('+res[r]["id"]+'); /> ';
                    //~ f += '<input type="button" id="delete" name="delete" value="Delete" onclick=delPrivilegesSave('+res[r]["id"]+'); /> ';
                    
                    f += '</td></tr>';
                }
                f += '<tr><td colspan=3><input type="button" id="add" name="add" value="Add" onclick=setPrivilegesAdd(); /></td></tr> ';                
                f +=        '</table>';
                f +=        '</fieldset>';
                f +=    '</div>';
                f += '</form>'; 
                //~ alert(f);
                $("#form").html(f);
            }

            function setPrivilegesSave(x) {
                alert(document.cookie);
                var r = '';
                r += 'id='+$('#setPrivilegesForm').find('input[name="id['+x+']"]').val();
                r += ',name='+$('#setPrivilegesForm').find('input[name="name['+x+']"]').val();
                r += ',description='+$('#setPrivilegesForm').find('input[name="description['+x+']"]').val();
                webiopi().callMacro("setPrivilegesSave", [r] , setPrivilegesSave1);
            }
            
            function setPrivilegesSave1() {
                document.cookie = "page=privilegesSetup";
                getPage(1);
            }
            
            function delPrivilegesSave(x) {
                webiopi().callMacro("delPrivilegesSave", [x] );
                document.cookie = "page=privilegesSetup";
                getPage(1);
            }
            
            function setPrivilegesAdd(){
                webiopi().callMacro("setPrivilegesAdd",  '' );
                document.cookie = "page=privilegesSetup";
                getPage(1);
            }
            //Fine pagina Privileges

            //Pagina inputSetup
            var setInputSetup = function (macro, args, response) {
                res = eval(response);
                var f = '<form name="setInputSetupForm" id="setInputSetupForm">';
                f +=    '<div class="fieldSet">';
                f +=        '<fieldset>';
                f +=            '<legend>Form Input Setup</legend>';
                f +=            '<table class="f-h" align=center><tr><th>ID</th><th>Name</th><th>Description</th><th></th></tr>';
                for (r in res) {
                    //~ $("#text").html(r + ' - ' + res[r]['name'] + '<br>'); 
                    f += '<input type="hidden" name="id['+ res[r]['id'] +']" value="'+ res[r]['id'] +'" />';
                    f += '<td><input type="text" name="name['+ res[r]['id'] +']" value="'+ res[r]['name'] +'" readonly /></td>';
                    f += '<td><input type="text" name="description['+ res[r]['id'] +']" value="'+ res[r]['description'] +'"  /></td>';
                    f += '<td><input type="button" id="valida" name="valida" value="Save" onclick=setInputSetupSave('+res[r]["id"]+'); /> ';
                    //~ f += '<input type="button" id="delete" name="delete" value="Delete" onclick=delPrivilegesSave('+res[r]["id"]+'); /> ';
                    
                    f += '</td></tr>';
                }
                //~ f += '<tr><td colspan=3><input type="button" id="add" name="add" value="Add" onclick=setInputSetupAdd(); /></td></tr> ';                
                f +=        '</table>';
                f +=        '</fieldset>';
                f +=    '</div>';
                f += '</form>'; 
                //~ alert(f);
                $("#form").html(f);
            }

            function setInputSetupSave(x) {
                //~ alert(document.cookie);
                var r = '';
                r += 'id='+$('#setInputSetupForm').find('input[name="id['+x+']"]').val();
                r += ',name='+$('#setInputSetupForm').find('input[name="name['+x+']"]').val();
                r += ',description='+$('#setInputSetupForm').find('input[name="description['+x+']"]').val();
                webiopi().callMacro("setInputSetupSave", [r] , setIOSave1);
            }
            
            function setInputSetupSave1() {
                document.cookie = "page=inputSetup";
                getPage(1);
            }
            
            function delInputSetupSave(x) {
                webiopi().callMacro("delInputSetupSave", [x] );
                document.cookie = "page=inputSetup";
                getPage(1);
            }
            
            function setInputSetupAdd(){
                webiopi().callMacro("setInputSetupAdd",  '' );
                document.cookie = "page=inputSetup";
                getPage(1);
            }
            //Fine pagina inputSetup

            //Begin Board Setup
            var setBoardSetup = function (macro, args, response) {
                //~ alert(response);
                res = eval(response);
                var f = '<form name="setBoardSetupForm" id="setBoardSetupForm">';
                f +=    '<div class="fieldSet">';
                f +=        '<fieldset>';
                f +=            '<legend>Form Board Setup</legend>';
                f +=            '<table class="f-h" align=center><tr><th>Name</th><th>Description</th><th title="Board Address">Add</th><th title="Enable">En</th><th>Save</th><th>IO</th></tr>';
                for (r in res) {                    
                    f += '<input type="hidden" name="id['+ res[r]['id'] +']" value="'+ res[r]['id'] +'" />';
                    f += '<td><input type="text" size="6" name="name['+ res[r]['id'] +']" value="'+ res[r]['name'] +'" /></td>';
                    f += '<td><input type="text" size="16" name="description['+ res[r]['id'] +']" value="'+ res[r]['description'] +'"  /></td>';
                    f += '<td><input type="text" size="1" name="address['+ res[r]['id'] +']" value="'+ res[r]['address'] +'"  /></td>';
                    var checked = '';
                    if (res[r]['enable'] == 1) {checked = 'checked="checked"'; }
                    f += '<td><input type="checkbox" name="enable['+ res[r]['id'] +']" value="'+ res[r]['enable'] +'" '+checked+'  /></td>';
                    f += '<td><input type="button" id="valida" name="valida" value="Save" onclick=setBoardSetupSave('+res[r]["id"]+'); /></td>';
                    f += '<td><input type="button" id="Edit" name="edit" value="Edit" onclick="document.cookie=\'page=boardIOSetup\';getPage(1)"; /></td>';
                    f += '</tr>';
                }
                f +=            '<tr><td colspan=6><input type="button" id="add" name="add" value="Add" onclick="addBoardSetup();"; /></td></tr> ';
                f +=        '</table>';
                f +=        '</fieldset>';
                f +=    '</div>';
                f += '</form>'; 
                //~ alert(f);
                $("#form").html(f);
            }

            function setBoardSetupSave(id) {
                //~ alert(x);
                var r = '';
                
                r += 'id='+$('#setBoardSetupForm').find('input[name="id['+id+']"]').val();
                r += ',name='+$('#setBoardSetupForm').find('input[name="name['+id+']"]').val();
                r += ',description='+$('#setBoardSetupForm').find('input[name="description['+id+']"]').val();
                r += ',address='+$('#setBoardSetupForm').find('input[name="address['+id+']"]').val();
                r += ',enable='+$( "input:checked" ).length;                
                webiopi().callMacro("setBoardSetupSave", [r] , setBoardSetupSave1);
            }
            
            function setBoardSetupSave1() {
                document.cookie = "page=boardSetup";
                getPage(1);
            }
            
            function addBoardSetup(){
                //~ alert('add');
                webiopi().callMacro("setBoardSetupAdd",  '' );
                document.cookie = "page=boardSetup";
                getPage(1);
            }            
            //Fine BoardSetup

            //Board IO Setup           
            var setBoardIOSetup = function (macro, args, response) {
                alert(response);
                res = eval(response);
                var board = '';
                var f = '';
                //~ $.map(res['io'],function (indice,valore) {
                    //~ f += indice+valore;
                //~ });
                //~ for(r in res) {
                    //~ f += '<div class="fieldSet" style="text-align:center;">';
                    //~ 
                    //~ if (board != res[r]['bid']) { //intestazione della board
                        //~ f += '<p style="font-weight:bold;">' +res[r]['bname']+ '  ' +res[r]['bdescription']+ '  ' +res[r]['benable']+ '</p>';
                        //~ board = res[r]['bid'];
                    //~ }
                    //~ 
                    //~ f += '<input type="hidden" name="id['+ res[r]['id'] +']" value="'+ res[r]['id'] +'" />';
                    //~ 
                    //~ f += '</div>';
                //~ }
                //~ f += '&nbsp;&nbsp;&nbsp;<input type="button" name="addIO" value="Add IO" onclick="addIO()"';
                
                $("#form").html(f);
            }
            
            

            //Encode characters
            function e(str) {return encodeURI(str); }
            
            //Decode characters
            function d(str) {return decodeURI(str);}
            
            //~ multipleValues.join( ", " )
    </script> 
</head>
<body>

<div id="container">
    <div id="title" class="title"></div>
    <div id="user"></div>
    
    <div id="login"></div>
    
    <div id="pages"></div>
    <div id="form"></div>
    <div id="text"></div>
    <div id="message"></div>
    <div id="footer"></div>
    <div id="dialog"></div>

</div>

</body>
</html>
